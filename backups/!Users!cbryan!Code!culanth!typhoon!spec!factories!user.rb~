Factory.define :user do |u|
  u.firstname { Random.firstname }
  u.lastname { Random.lastname }
  
  u.login{ |u| "#{u.firstname}#{u.lastname}#{Factory.next(:number)}".downcase }
  u.password { |u| u.login }
  u.password_confirmation { |u| u.login }
  u.email { |u| u.login + "@sample.com" }

  u.city { Random.city }
  u.state { Random.state }
  u.home_phone { Random.phone }
  
  u.site_key "mc2"
  u.after_build { |user| user.reset_single_access_token }
end

Factory.sequence :number do |n|
  n.to_s
end
